<!DOCTYPE html>
<html>
<head>
    <title>Pharmacy POS Receipt</title>
    <style>
#thermal-pos table {
width: 100%;}
table, th {
  border:Nill;
  text-align:left;
  font-size: 2.95mm;
  font-family: sans-serif;

}

        /* Your CSS styles here */
    </style>
</head>
<body>
    <div id="thermal-pos">
        <!-- Your HTML content here -->
    </div>

    <script>
        // Parse the query parameters to get the item, price, quantity, and subtotal arrays
        const urlParams = new URLSearchParams(window.location.search);
        const item = urlParams.get('item').split(',');
        const price = urlParams.get('price').split(',');
        const qty = urlParams.get('qty').split(',');
        const subtotal = urlParams.get('subtotal').split(',');

        // Create an array to hold the items
        const result = [];

        // Iterate over the item array to create objects and push them into the result array
        item.forEach(function(value, id) => {
            result[id] = {
                item: item[id],
                price: price[id],
                qty: qty[id],
                sub_total: subtotal[id]
            });
        });

        // Render the receipt using the result array
        const thermalPos = document.getElementById('thermal-pos');
        const table = document.createElement('table');
        result.forEach(row => {
            const tr = document.createElement('tr');
            const tdItem = document.createElement('td');
            tdItem.textContent = row.item;
            const tdQtyPrice = document.createElement('td');
            tdQtyPrice.textContent = row.qty + ' x ' + row.price;
            const tdSubTotal = document.createElement('td');
            tdSubTotal.textContent = 'K' + row.sub_total;
            tr.appendChild(tdItem);
            tr.appendChild(tdQtyPrice);
            tr.appendChild(tdSubTotal);
            table.appendChild(tr);
        });
        thermalPos.appendChild(table);

        // Add total, cash, and balance to the receipt
        const total = urlParams.get('total');
        const payment = urlParams.get('Payment');
        const balance = urlParams.get('Balance');
        const totalRow = document.createElement('tr');
        const tdTotalLabel = document.createElement('th');
        tdTotalLabel.textContent = 'Total';
        const tdTotalValue = document.createElement('th');
        tdTotalValue.textContent = total;
        totalRow.appendChild(tdTotalLabel);
        totalRow.appendChild(tdTotalValue);
        table.appendChild(totalRow);

        const cashRow = document.createElement('tr');
        const tdCashLabel = document.createElement('th');
        tdCashLabel.textContent = 'Cash';
        const tdCashValue = document.createElement('th');
        tdCashValue.textContent = payment;
        cashRow.appendChild(tdCashLabel);
        cashRow.appendChild(tdCashValue);
        table.appendChild(cashRow);

        const balanceRow = document.createElement('tr');
        const tdBalanceLabel = document.createElement('th');
        tdBalanceLabel.textContent = 'Balance';
        const tdBalanceValue = document.createElement('th');
        tdBalanceValue.textContent = balance;
        balanceRow.appendChild(tdBalanceLabel);
        balanceRow.appendChild(tdBalanceValue);
        table.appendChild(balanceRow);

        // Add the footer
        const footerTable = document.createElement('table');
        const footerRow = document.createElement('tr');
        const tdDate = document.createElement('td');
        tdDate.textContent = urlParams.get('Date');
        const tdIdInvoice = document.createElement('td');
        tdIdInvoice.textContent = urlParams.get('id_invoice');
        footerRow.appendChild(tdDate);
        footerRow.appendChild(tdIdInvoice);
        footerTable.appendChild(footerRow);
        thermalPos.appendChild(footerTable);

        // Print the receipt
        window.print();
    </script>
</body>
</html>